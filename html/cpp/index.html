<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <meta name="author" content="Tomoki Imai">
  <title>競技プログラミングの為のC++入門</title>
  <style type="text/css">code{white-space: pre;}</style>
  <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <style type="text/css">
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; background-color: #f8f8f8; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
pre, code { background-color: #f8f8f8; }
code > span.kw { color: #204a87; font-weight: bold; }
code > span.dt { color: #204a87; }
code > span.dv { color: #0000cf; }
code > span.bn { color: #0000cf; }
code > span.fl { color: #0000cf; }
code > span.ch { color: #4e9a06; }
code > span.st { color: #4e9a06; }
code > span.co { color: #8f5902; font-style: italic; }
code > span.ot { color: #8f5902; }
code > span.al { color: #ef2929; }
code > span.fu { color: #000000; }
code > span.er { font-weight: bold; }
  </style>
  <style type="text/css">
  
  body {
      font-family: Helvetica, arial, sans-serif;
      font-size: 14px;
      line-height: 1.6;
      padding-top: 10px;
      padding-bottom: 10px;
      background-color: white;
      padding: 30px; }
  
  body > *:first-child {
      margin-top: 0 !important; }
  body > *:last-child {
      margin-bottom: 0 !important; }
  
  a {
      color: #4183C4; }
  a.absent {
      color: #cc0000; }
  a.anchor {
      display: block;
      padding-left: 30px;
      margin-left: -30px;
      cursor: pointer;
      position: absolute;
      top: 0;
      left: 0;
      bottom: 0; }
  
  h1, h2, h3, h4, h5, h6 {
      margin: 20px 0 10px;
      padding: 0;
      font-weight: bold;
      -webkit-font-smoothing: antialiased;
      cursor: text;
      position: relative; }
  
  h1:hover a.anchor, h2:hover a.anchor, h3:hover a.anchor, h4:hover a.anchor, h5:hover a.anchor, h6:hover a.anchor {
      background: url("../../images/modules/styleguide/para.png") no-repeat 10px center;
      text-decoration: none; }
  
  h1 tt, h1 code {
      font-size: inherit; }
  
  h2 tt, h2 code {
      font-size: inherit; }
  
  h3 tt, h3 code {
      font-size: inherit; }
  
  h4 tt, h4 code {
      font-size: inherit; }
  
  h5 tt, h5 code {
      font-size: inherit; }
  
  h6 tt, h6 code {
      font-size: inherit; }
  
  h1 {
      font-size: 28px;
      color: black; }
  
  h2 {
      font-size: 24px;
      border-bottom: 1px solid #cccccc;
      color: black; }
  
  h3 {
      font-size: 18px; }
  
  h4 {
      font-size: 16px; }
  
  h5 {
      font-size: 14px; }
  
  h6 {
      color: #777777;
      font-size: 14px; }
  
  p, blockquote, ul, ol, dl, li, table, pre {
      margin: 15px 0; }
  
  hr {
      background: transparent url("../../images/modules/pulls/dirty-shade.png") repeat-x 0 0;
      border: 0 none;
      color: #cccccc;
      height: 4px;
      padding: 0; }
  
  body > h2:first-child {
      margin-top: 0;
      padding-top: 0; }
  body > h1:first-child {
      margin-top: 0;
      padding-top: 0; }
  body > h1:first-child + h2 {
      margin-top: 0;
      padding-top: 0; }
  body > h3:first-child, body > h4:first-child, body > h5:first-child, body > h6:first-child {
      margin-top: 0;
      padding-top: 0; }
  
  a:first-child h1, a:first-child h2, a:first-child h3, a:first-child h4, a:first-child h5, a:first-child h6 {
      margin-top: 0;
      padding-top: 0; }
  
  h1 p, h2 p, h3 p, h4 p, h5 p, h6 p {
      margin-top: 0; }
  
  
  li p.first {
      display: inline-block;
      padding: 0;
  }
  
  ul, ol {
      padding-left: 30px;
  }
  
  ul :first-child, ol :first-child {
      margin-top: 0; }
  
  ul :last-child, ol :last-child {
      margin-bottom: 0; }
  
  dl {
      padding: 0; }
  dl dt {
      font-size: 14px;
      font-weight: bold;
      font-style: italic;
      padding: 0;
      margin: 15px 0 5px; }
  dl dt:first-child {
      padding: 0; }
  dl dt > :first-child {
      margin-top: 0; }
  dl dt > :last-child {
      margin-bottom: 0; }
  dl dd {
      margin: 0 0 15px;
      padding: 0 15px; }
  dl dd > :first-child {
      margin-top: 0; }
  dl dd > :last-child {
      margin-bottom: 0; }
  
  blockquote {
      border-left: 4px solid #dddddd;
      padding: 0 15px;
      color: #777777; }
  blockquote > :first-child {
      margin-top: 0; }
  blockquote > :last-child {
      margin-bottom: 0; }
  
  table {
      padding: 0; }
  table tr {
      border-top: 1px solid #cccccc;
      background-color: white;
      margin: 0;
      padding: 0; }
  table tr:nth-child(2n) {
      background-color: #f8f8f8; }
  table tr th {
      font-weight: bold;
      border: 1px solid #cccccc;
      text-align: left;
      margin: 0;
      padding: 6px 13px; }
  table tr td {
      border: 1px solid #cccccc;
      text-align: left;
      margin: 0;
      padding: 6px 13px; }
  table tr th :first-child, table tr td :first-child {
      margin-top: 0; }
  table tr th :last-child, table tr td :last-child {
      margin-bottom: 0; }
  
  img {
      max-width: 100%; }
  
  span.frame {
      display: block;
      overflow: hidden; }
  span.frame > span {
      border: 1px solid #dddddd;
      display: block;
      float: left;
      overflow: hidden;
      margin: 13px 0 0;
      padding: 7px;
      width: auto; }
  span.frame span img {
      display: block;
      float: left; }
  span.frame span span {
      clear: both;
      color: #333333;
      display: block;
      padding: 5px 0 0; }
  span.align-center {
      display: block;
      overflow: hidden;
      clear: both; }
  span.align-center > span {
      display: block;
      overflow: hidden;
      margin: 13px auto 0;
      text-align: center; }
  span.align-center span img {
      margin: 0 auto;
      text-align: center; }
  span.align-right {
      display: block;
      overflow: hidden;
      clear: both; }
  span.align-right > span {
      display: block;
      overflow: hidden;
      margin: 13px 0 0;
      text-align: right; }
  span.align-right span img {
      margin: 0;
      text-align: right; }
  span.float-left {
      display: block;
      margin-right: 13px;
      overflow: hidden;
      float: left; }
  span.float-left span {
      margin: 13px 0 0; }
  span.float-right {
      display: block;
      margin-left: 13px;
      overflow: hidden;
      float: right; }
  span.float-right > span {
      display: block;
      overflow: hidden;
      margin: 13px auto 0;
      text-align: right; }
  
  code, tt {
      margin: 0 2px;
      padding: 0 5px;
      white-space: nowrap;
      border: 1px solid #eaeaea;
      background-color: #f8f8f8;
      border-radius: 3px; }
  
  pre code {
      margin: 0;
      padding: 0;
      white-space: pre;
      border: none;
      background: transparent; }
  
  .highlight pre {
      background-color: #f8f8f8;
      border: 1px solid #cccccc;
      font-size: 13px;
      line-height: 19px;
      overflow: auto;
      padding: 6px 10px;
      border-radius: 3px; }
  
  pre {
      background-color: #f8f8f8;
      border: 1px solid #cccccc;
      font-size: 13px;
      line-height: 19px;
      overflow: auto;
      padding: 6px 10px;
      border-radius: 3px; }
  pre code, pre tt {
      background-color: transparent;
      border: none; }
  
  </style>
</head>
<body>
<header>
<h1 class="title">競技プログラミングの為のC++入門</h1>
<h2 class="author">Tomoki Imai</h2>
</header>
<h1 id="introduction">Introduction</h1>
<p>ここでは、競技プログラミングをする為のC++について書く。<br />通常のプログラミングでは使用するべきではない書き方も多用する。<br />C++を使うメリットとしては、高速であること、使用している人が多いことが挙げられる。</p>
<h2 id="前提知識">前提知識</h2>
<p>この文書を読むにあたっての前提知識を列挙する。</p>
<ul>
<li>基本的なC/C++の知識。すくなくともCで関数定義等はできることを仮定する<br /></li>
<li>g++/clang++がインストールされていること</li>
</ul>
<h2 id="リファレンス">リファレンス</h2>
<p>上記の前提知識、およびこの文書でカバーしない場所を参照する文書を紹介する。</p>
<ul>
<li><a href="http://d.hatena.ne.jp/torus711/20130516/p1">Windows で競技プログラミングしよう</a><br /></li>
<li><a href="http://www.geocities.jp/ky_webid/cpp/language/index.html">Programming Place C++編</a></li>
</ul>
<h2 id="環境">環境</h2>
<p>下記のソースは、Linux上のg++4.8.2においてテストしている。</p>
<h1 id="コンパイルの仕方">コンパイルの仕方</h1>
<p>manを読む。と言いたいところだが、いくつか注意点がある。</p>
<h2 id="c11について">C++11について</h2>
<p>C++11はC++の比較的新しいバージョンである。<br />競技プログラミングのサイト(AOJ,Codeforces,TopCoder...)は基本的にC++11をサポートしている。<br />が、いくつかのサイト(POJ...)はC++11をサポートしていない。<br />この文書では、C++11をつかうことを前提とする。<br />理由としては、大分C++11をサポートするサイトが多くなってきたこと、C++11はかなり強力であることである。</p>
<h2 id="コンパイルオプション">コンパイルオプション</h2>
<p>g++/clang++は膨大なコンパイルオプションを備えている。ここでは有益なもののみを示す。</p>
<ul>
<li>-O2 : 最適化をオンにする。-O3もあるが、基本的には-O2で良いと思われる(要調査)<br /></li>
<li>-Wall : 普通のコードにおけるオプション警告をすべてオンにする<br /></li>
<li>-std=c++11 : C++11でコンパイルする。これなしだとC++03になる。また、c++0xと書く人もいるが、非推奨である。</li>
</ul>
<p>これらをつけてコンパイルするべきである。具体的には以下のようにする。</p>
<pre><code>$ g++ -std=c++11 -Wall -O2 main.cpp -o main</code></pre>
<p>これを走らせると、ディレクトリにmainという実行ファイルが生成される。</p>
<h2 id="aliasを設定する">Aliasを設定する</h2>
<p>Unixシステムにはコマンドを新しく設定するaliasという機能が存在する。<br />詳しくは&quot;man alias&quot;を参照してほしい。<br />私は以下のようなaliasを設定している。aliasの設定方法については検索してほしい。</p>
<pre><code>alias gpp=&quot;g++ -std=c++11 -Wall -O2&quot;</code></pre>
<p>これによって、以下のような記述ができるようになる。</p>
<pre><code>$ gpp main.cpp -o main</code></pre>
<h2 id="コマンドの実行">コマンドの実行</h2>
<p>(必要か?)</p>
<h1 id="cの基本">C++の基本</h1>
<h2 id="main関数">main関数</h2>
<p>main関数は、C,C++でほとんど変わらない。<br />ただし、return 0を忘れるとruntime errorとなる場合がある。(例えばAOJ)<br />いわゆるHelloWorldは以下のように書ける。</p>
<pre class="sourceCode cpp"><code class="sourceCode cpp"><span class="ot">#include &lt;iostream&gt;</span>

<span class="kw">using</span> <span class="kw">namespace</span> std;

<span class="dt">int</span> main(<span class="dt">int</span> argc,<span class="dt">char</span> **argv){
    cout &lt;&lt; <span class="st">&quot;Hello World&quot;</span> &lt;&lt; endl;
    <span class="kw">return</span> <span class="dv">0</span>;
}</code></pre>
<h2 id="includeについて">includeについて</h2>
<p>多くの入門サイトにおいて、おまじないと称されるincludeについてすこしだけ。<br />競技プログラミングにおいて、ファイルを分割することはほとんどない。<br />なぜなら、ファイルの提出は1ファイルのみであることが多いからである。</p>
<p>しかしながら、iostreamのincludeが実際には何をしているのか知っておくのは有益である。<br />g++にオプション,-Eを設定することでプリプロセス済のファイルを出すことができる。<br />それによりincludeが何をしているのかわかるかもしれない。</p>
<p>includeとは、ファイルのコピペである。<br />includeは指定されたファイルをそこにペーストするだけにすぎない。<br />そのファイルの中に、coutだったりの定義がはいっているのである。</p>
<h2 id="using-namespace">using namespace</h2>
<p>名前空間は、C言語には明示的には存在しない概念である。<br />C++において、名前空間は以下のように定義できる。</p>
<pre class="sourceCode cpp"><code class="sourceCode cpp"><span class="ot">#include &lt;iostream&gt;</span>

<span class="kw">using</span> <span class="kw">namespace</span> std;

<span class="kw">namespace</span> hoge{
    <span class="dt">int</span> poyo(<span class="dt">int</span> x){
        <span class="kw">return</span> x;
    }
};

<span class="dt">int</span> main(<span class="dt">int</span> argc,<span class="dt">char</span> **argv){
    <span class="co">// compile error</span>
    <span class="co">// poyo was not declared in this scope</span>
    <span class="co">// poyo(1);</span>

    <span class="co">// ok</span>
    hoge::poyo(<span class="dv">1</span>);
    <span class="kw">return</span> <span class="dv">0</span>;
}</code></pre>
<p>つまるところ、Cのスコープのようなものである。<br />ただし、中の関数、変数にアクセスできる。それには上記のように(hoge::)が必要になる。<br />当然、標準ライブラリが持っている名前空間というものも存在していて、それがstdである。<br />using namespace ...は指定した名前空間をすべて取り込む。<br />よって、本来std::coutと書くところをcoutと省略することができる。<br />競技プログラミングをする上で、using namespace stdは必須であると言える。<br />通常のプログラミングでは名前の衝突が起こる可能性が高く、オススメできない。</p>
<p>また、coutについては後々書くことにする。</p>
<h2 id="制御文">制御文</h2>
<p>制御文はアルゴリズムの根本と言っても良い。<br />基本的にはCと同じであるが、例を紹介しながらさらっと見ていく。</p>
<h3 id="if文">if文</h3>
<p>Cのifと大体同じである。</p>
<pre class="sourceCode cpp"><code class="sourceCode cpp"><span class="ot">#include &lt;iostream&gt;</span>

<span class="kw">using</span> <span class="kw">namespace</span> std;

<span class="kw">struct</span> Hoge{
    <span class="kw">explicit</span> <span class="kw">operator</span> <span class="dt">bool</span>() <span class="dt">const</span>{
        cerr &lt;&lt; <span class="st">&quot;bool cast&quot;</span> &lt;&lt; endl;
        <span class="kw">return</span> <span class="kw">true</span>;
    }
};

<span class="dt">int</span> main(<span class="dt">int</span> argc,<span class="dt">char</span> **argv){
    Hoge h;
    <span class="kw">if</span>(h){
        cerr &lt;&lt; <span class="st">&quot;h is true&quot;</span> &lt;&lt; endl;
    }<span class="kw">else</span>{
        cerr &lt;&lt; <span class="st">&quot;h is false&quot;</span> &lt;&lt; endl;
    } <span class="co">// -&gt; h is true</span>

    <span class="kw">if</span>(<span class="dv">0</span>){
        cerr &lt;&lt; <span class="st">&quot;0 is true&quot;</span> &lt;&lt; endl; 
    }<span class="kw">else</span>{
        cerr &lt;&lt; <span class="st">&quot;0 is false&quot;</span> &lt;&lt; endl;
    } <span class="co">// -&gt; 0 is false</span>
    <span class="kw">return</span> <span class="dv">0</span>;
}</code></pre>
<p>boolへのキャストが発生する。整数型(int,long long)は0のみがfalse,それ以外はtrueと解釈される。<br />クラスの場合は、boolへのキャストが発生する。</p>
<h3 id="通常のfor文">通常のfor文</h3>
<p>Cのforと大体同じである。が、C90と違って宣言をfor文内で行える。</p>
<pre class="sourceCode cpp"><code class="sourceCode cpp"><span class="ot">#include &lt;iostream&gt;</span>

<span class="kw">using</span> <span class="kw">namespace</span> std;

<span class="dt">int</span> main(<span class="dt">int</span> argc,<span class="dt">char</span> **argv){
    <span class="kw">for</span>(<span class="dt">int</span> i=<span class="dv">0</span>;i&lt;<span class="dv">10</span>;i++){
        cout &lt;&lt; i &lt;&lt; endl;
    }
    <span class="kw">return</span> <span class="dv">0</span>;
}</code></pre>
<p>また競技の世界では以下のようなマクロを宣言することが多い。</p>
<pre class="sourceCode cpp"><code class="sourceCode cpp"><span class="ot">#include &lt;iostream&gt;</span>

<span class="ot">#define rep(i,n) for(int i=0;i&lt;(int)(n);i++)</span>

<span class="kw">using</span> <span class="kw">namespace</span> std;

<span class="dt">int</span> main(<span class="dt">int</span> argc,<span class="dt">char</span> **argv){
    rep(i,<span class="dv">10</span>){
        cout &lt;&lt; i &lt;&lt; endl;
    }
    <span class="kw">return</span> <span class="dv">0</span>;
}</code></pre>
<p>これによって、インクリメントや条件文のミスを減らし、またタイプ量も減らすことができる。</p>
<h3 id="range-based-for文">range-based for文</h3>
<p>これについてはvector等と一緒に述べることにする。</p>
<h3 id="while文">while文</h3>
<p>Cと大体同じである。</p>
<pre class="sourceCode cpp"><code class="sourceCode cpp"><span class="ot">#include &lt;iostream&gt;</span>

<span class="kw">using</span> <span class="kw">namespace</span> std;

<span class="dt">int</span> main(<span class="dt">int</span> argc,<span class="dt">char</span> **argv){
    <span class="co">// 無限ループ</span>
    <span class="kw">while</span>(<span class="kw">true</span>){
    }
    <span class="kw">return</span> <span class="dv">0</span>;
}</code></pre>
<p>個人的には、複数テストケースのときに以下のように使うことが多い。</p>
<pre class="sourceCode cpp"><code class="sourceCode cpp"><span class="ot">#include &lt;iostream&gt;</span>

<span class="kw">using</span> <span class="kw">namespace</span> std;

<span class="co">// ここで解く</span>
<span class="dt">int</span> solve(<span class="dt">int</span> n){
    <span class="kw">return</span> n;
}

<span class="dt">int</span> main(<span class="dt">int</span> argc,<span class="dt">char</span> **argv){
    <span class="co">// n=0のケースが来るまでループ</span>
    <span class="kw">while</span>(<span class="kw">true</span>){
        <span class="dt">int</span> n;
        cin &gt;&gt; n;
        <span class="kw">if</span>(n == <span class="dv">0</span>) <span class="kw">break</span>;
        cout &lt;&lt; solve(n) &lt;&lt; endl;
    }
    <span class="kw">return</span> <span class="dv">0</span>;
}</code></pre>
<h3 id="do-while">do-while</h3>
<p>Cのdo-whileとほとんど同じである。<br />競技の世界でも、通常の世界でもあまり目にすることはないが、競技の世界ではnext_permutationというライブラリ関数を使う際に使用することが多い。<br />ここでは省略するが、next_permutationについては以下を参照されたし。</p>
<ul>
<li><a href="https://sites.google.com/site/cpprefjp/reference/algorithm/next_permutation">cpprefjp - C++ Library Reference next_permutation</a></li>
</ul>
</body>
</html>

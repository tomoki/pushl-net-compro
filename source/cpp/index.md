% 競技プログラミングの為のC++入門
% Tomoki Imai

# Introduction
ここでは、競技プログラミングをする為のC++について書く。
通常のプログラミングでは使用するべきではない書き方も多用する。
C++を使うメリットとしては、高速であること、使用している人が多いことが挙げられる。

## 前提知識
この文書を読むにあたっての前提知識を列挙する。

- 基本的なC/C++の知識。すくなくともCで関数定義等はできることを仮定する
- g++/clang++がインストールされていること

## リファレンス
上記の前提知識、およびこの文書でカバーしない場所を参照する文書を紹介する。

- [Windows で競技プログラミングしよう](http://d.hatena.ne.jp/torus711/20130516/p1)
- [Programming Place C++編](http://www.geocities.jp/ky_webid/cpp/language/index.html)

## 環境
下記のソースは、Linux上のg++4.8.2においてテストしている。

# コンパイルの仕方
manを読む。と言いたいところだが、いくつか注意点がある。

## C++11について
C++11はC++の比較的新しいバージョンである。
競技プログラミングのサイト(AOJ,Codeforces,TopCoder...)は基本的にC++11をサポートしている。
が、いくつかのサイト(POJ...)はC++11をサポートしていない。
この文書では、C++11をつかうことを前提とする。
理由としては、大分C++11をサポートするサイトが多くなってきたこと、C++11はかなり強力であることである。

## コンパイルオプション
g++/clang++は膨大なコンパイルオプションを備えている。ここでは有益なもののみを示す。

- -O2 : 最適化をオンにする。-O3もあるが、基本的には-O2で良いと思われる(要調査)
- -Wall : 普通のコードにおけるオプション警告をすべてオンにする
- -std=c++11 : C++11でコンパイルする。これなしだとC++03になる。また、c++0xと書く人もいるが、非推奨である。

これらをつけてコンパイルするべきである。具体的には以下のようにする。

~~~~~~
$ g++ -std=c++11 -Wall -O2 main.cpp -o main
~~~~~~

これを走らせると、ディレクトリにmainという実行ファイルが生成される。

## Aliasを設定する
Unixシステムにはコマンドを新しく設定するaliasという機能が存在する。
詳しくは"man alias"を参照してほしい。
私は以下のようなaliasを設定している。aliasの設定方法については検索してほしい。

~~~~~~
alias gpp="g++ -std=c++11 -Wall -O2"
~~~~~~

これによって、以下のような記述ができるようになる。

~~~~~~
$ gpp main.cpp -o main
~~~~~~

## コマンドの実行
(必要か?)

# C++の基本

## main関数
main関数は、C,C++でほとんど変わらない。
ただし、return 0を忘れるとruntime errorとなる場合がある。(例えばAOJ)
いわゆるHelloWorldは以下のように書ける。

~~~~~~{.cpp}
#include <iostream>

using namespace std;

int main(int argc,char **argv){
    cout << "Hello World" << endl;
    return 0;
}
~~~~~~

## includeについて
多くの入門サイトにおいて、おまじないと称されるincludeについてすこしだけ。
競技プログラミングにおいて、ファイルを分割することはほとんどない。
なぜなら、ファイルの提出は1ファイルのみであることが多いからである。

しかしながら、iostreamのincludeが実際には何をしているのか知っておくのは有益である。
g++にオプション,-Eを設定することでプリプロセス済のファイルを出すことができる。
それによりincludeが何をしているのかわかるかもしれない。

includeとは、ファイルのコピペである。
includeは指定されたファイルをそこにペーストするだけにすぎない。
そのファイルの中に、coutだったりの定義がはいっているのである。

## using namespace
名前空間は、C言語には明示的には存在しない概念である。
C++において、名前空間は以下のように定義できる。

~~~~~~{.cpp}
#include <iostream>

using namespace std;

namespace hoge{
    int poyo(int x){
        return x;
    }
};

int main(int argc,char **argv){
    // compile error
    // poyo was not declared in this scope
    // poyo(1);

    // ok
    hoge::poyo(1);
    return 0;
}
~~~~~~

つまるところ、Cのスコープのようなものである。
ただし、中の関数、変数にアクセスできる。それには上記のように(hoge::)が必要になる。
当然、標準ライブラリが持っている名前空間というものも存在していて、それがstdである。
using namespace ...は指定した名前空間をすべて取り込む。
よって、本来std::coutと書くところをcoutと省略することができる。
競技プログラミングをする上で、using namespace stdは必須であると言える。
通常のプログラミングでは名前の衝突が起こる可能性が高く、オススメできない。


